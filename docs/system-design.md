# 系统设计（V1 草案）

## 1. 目标与边界

### 目标

- 输入：用户的视频创作意图（主题、风格、镜头、时长、比例等）
- 处理：由大模型 + Skill 规则联合生成高质量视频 Prompt
- 输出：可直接投喂视频模型（如 Seedance2）的结构化 Prompt

### 边界

- 本阶段只做架构与目录设计，不包含可执行代码
- 大模型默认使用 Kimi，但以插件形式接入，保证可替换
- `Private` 目录用于本地私有配置与私有 Skill，不进入远端仓库

---

## 2. 核心模块拆分

### A. LLM 插件层（可替换）

职责：

- 统一不同大模型调用方式
- 提供一致的请求/响应适配
- 隔离厂商 SDK 差异

设计要点：

- 以 `llm-plugins` 作为插件根目录
- `kimi` 作为首个实现插件
- 未来可新增 `openai`、`qwen`、`claude` 等插件目录

### B. Skill 层（Prompt 约束与模板）

职责：

- 提供针对目标视频模型的提示词模板、字段约束和组合策略
- 将“业务语义”转化为“模型友好的 Prompt 结构”

设计要点：

- `skills/seedance2` 提供示例 Skill
- 拆分模板、约束、示例，便于维护和扩展

### C. Orchestrator（后续实现）

职责：

- 接收用户意图
- 加载 Skill 模板与规则
- 调用指定 LLM 插件（默认 Kimi）
- 输出最终 Prompt

说明：

- 本次仅定义责任，不创建代码

### D. Private（本地私有层）

职责：

- 保存 Kimi API Key
- 保存个人或团队内部私有 Skill
- 存放本地调试配置

安全策略：

- 根目录 `.gitignore` 忽略整个 `Private/`

---

## 3. 典型生成流程（逻辑）

1. 用户输入视频需求（主题、风格、镜头、约束）
2. 系统选择 Skill（如 `seedance2`）
3. Skill 提供模板与约束上下文
4. Orchestrator 组装 LLM 请求
5. 通过 `kimi` 插件调用大模型
6. 返回结构化 Prompt
7. 输出给下游视频生成系统

---

## 4. 插件化设计原则

- 单一接口：所有 LLM 插件遵守统一能力边界
- 配置解耦：插件读取公开配置 + `Private` 本地密钥
- 易替换：更换模型只切换插件，不改 Skill 定义
- 可测试：插件输入输出标准化，便于后续自动测试

---

## 5. Skill 设计原则（以 Seedance2 为样例）

- 模板化：固定结构 + 可变参数
- 约束化：长度、风格、禁用词、镜头规则可独立维护
- 示例化：提供输入/输出示例用于调优
- 可组合：同一 Skill 可扩展多个子模板场景

---

## 6. 后续迭代建议（非本次实现）

- 定义统一插件接口文档（请求/响应 schema）
- 增加 Prompt 质量评估流程
- 增加多 Skill 路由能力（按任务自动选 Skill）
- 增加版本管理（Skill 与插件版本对齐）
